<!DOCTYPE html>
<html>
<head>
    <title>ë°”ë‚˜ë‚˜ íˆì–´ë¡œì˜ ì „ì„¤ - ìŠ¤í† ë¦¬í…”ë§ ëª¨í—˜</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Celtic+Hand&display=swap');
        
        body { 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: radial-gradient(circle at center, #2c3e50 0%, #34495e 50%, #2c3e50 100%);
            font-family: 'Cinzel', serif;
            color: #f39c12;
            overflow: hidden;
        }
        
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            background: transparent;
        }
        
        .star {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        #gameContainer {
            text-align: center;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5), inset 0 2px 5px rgba(255,255,255,0.1);
            border: 3px solid #f39c12;
            position: relative;
        }
        
        #gameTitle {
            font-family: 'Celtic Hand', cursive;
            font-size: 28px;
            margin: 0;
            color: #f1c40f;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            margin-bottom: 15px;
        }
        
        canvas { 
            border: 4px solid #8e44ad; 
            background: linear-gradient(180deg, #87ceeb 0%, #98fb98 60%, #8fbc8f 100%);
            border-radius: 15px;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.3);
        }
        
        #storyPanel {
            margin: 15px 0;
            font-size: 16px;
            color: #ecf0f1;
            background: rgba(52, 73, 94, 0.8);
            padding: 15px;
            border-radius: 10px;
            border-left: 5px solid #9b59b6;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #questInfo {
            margin: 10px 0;
            font-size: 14px;
            color: #f39c12;
            background: rgba(243, 156, 18, 0.1);
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #f39c12;
        }
        
        .legend-stats {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
            font-size: 14px;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .achievement-notification {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #f1c40f, #f39c12);
            color: #2c3e50;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateX(300px);
            transition: transform 0.5s ease;
        }
        
        .achievement-notification.show {
            transform: translateX(0);
        }
        
        .magic-button {
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .magic-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div id="gameContainer">
        <h1 id="gameTitle">âš”ï¸ ë°”ë‚˜ë‚˜ íˆì–´ë¡œì˜ ì „ì„¤ âš”ï¸</h1>
        
        <div id="storyPanel">
            ì˜›ë‚  ì˜›ë‚ , ë””ì§€í„¸ ì™•êµ­ì— ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ íˆì–´ë¡œê°€ ì‚´ê³  ìˆì—ˆìŠµë‹ˆë‹¤...
        </div>
        
        <div class="legend-stats">
            <span>ğŸ† ì „ì„¤ ì ìˆ˜: <span id="legendScore">0</span></span>
            <span>ğŸ’ íšë“ ë§ˆë²•ì„: <span id="magicStones">0</span></span>
            <span>âš”ï¸ ì²˜ì¹˜í•œ ì•…ë§ˆ: <span id="defeatedDemons">0</span></span>
        </div>
        
        <canvas id="mysticalCanvas" width="800" height="400"></canvas>
        
        <div id="questInfo">
            ğŸ—¡ï¸ <strong>í˜„ì¬ í€˜ìŠ¤íŠ¸:</strong> <span id="currentQuest">ì„¸ê³„ ì°½ì¡°ì˜ ë§ˆë²•ì„ ë°°ìš°ëŠ” ì¤‘...</span><br>
            ğŸ¯ <strong>ì¡°ì‘ë²•:</strong> â† â†’ ì´ë™ | ìŠ¤í˜ì´ìŠ¤ ì í”„ | Z ë§ˆë²• ë°œì‚¬ | R ëª¨í—˜ ì¬ì‹œì‘
        </div>
        
        <div>
            <button class="magic-button" onclick="teleportHero()">ğŸŒŸ ìˆœê°„ì´ë™</button>
            <button class="magic-button" onclick="castProtection()">ğŸ›¡ï¸ ë³´í˜¸ ë§ˆë²•</button>
            <button class="magic-button" onclick="unleashPower()">âš¡ í˜ì˜ ê°ì„±</button>
        </div>
    </div>

    <script>
        // âœ¨ ì „ì„¤ì˜ ì‹œì‘: ë””ì§€í„¸ ì™•êµ­ì˜ ì°½ì¡°
        console.log("ğŸŒŸ ë°”ë‚˜ë‚˜ íˆì–´ë¡œì˜ ì „ì„¤ì´ ì‹œì‘ë©ë‹ˆë‹¤!");
        console.log("ğŸ“– ì±•í„° 1: ì„¸ê³„ ì°½ì¡°ì˜ ë§ˆë²•");
        
        const ì‹ ë¹„í•œìº”ë²„ìŠ¤ = document.getElementById('mysticalCanvas');
        const ë§ˆë²•ì˜ë¶“ = ì‹ ë¹„í•œìº”ë²„ìŠ¤.getContext('2d');
        const ì´ì•¼ê¸°íŒ¨ë„ = document.getElementById('storyPanel');
        const í€˜ìŠ¤íŠ¸ì •ë³´ = document.getElementById('currentQuest');
        
        // ğŸŒŒ ê²Œì„ ì„¸ê³„ì˜ ì‹ ë¹„í•œ ìƒíƒœ
        let ì „ì„¤ìƒíƒœ = {
            ì ìˆ˜: 0,
            ë§ˆë²•ì„: 0,
            ì²˜ì¹˜í•œì•…ë§ˆ: 0,
            í˜„ì¬ì±•í„°: 1,
            ì‹œì‘ì‹œê°„: Date.now(),
            ê²Œì„ì¢…ë£Œ: false,
            ë¬´ì ìƒíƒœ: false,
            íŠ¹ë³„ëŠ¥ë ¥: {
                ìˆœê°„ì´ë™: false,
                ë³´í˜¸ë§ˆë²•: false,
                í˜ì˜ê°ì„±: false
            }
        };

        // ğŸ¦¸â€â™‚ï¸ ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ íˆì–´ë¡œ
        const ë°”ë‚˜ë‚˜íˆì–´ë¡œ = {
            ì´ë¦„: "ìš©ê°í•œ ë°”ë‚˜ë‚˜ ê¸°ì‚¬",
            xìœ„ì¹˜: 100,
            yìœ„ì¹˜: 300,
            ë„ˆë¹„: 50,
            ë†’ì´: 50,
            ì í”„ë ¥: 0,
            ìˆ˜í‰ì†ë„: 0,
            ë•…ì—ìˆë‹ˆ: true,
            ìƒ‰ìƒ: '#d35400',
            ìƒëª…ë ¥: 3,
            ìµœëŒ€ìƒëª…ë ¥: 3,
            ê²½í—˜ì¹˜: 0,
            ë ˆë²¨: 1,
            ì „ì„¤ëŠ¥ë ¥: {
                ë°”ë‚˜ë‚˜ë§ˆë²•: true,
                ì´ë‹¨ì í”„: false,
                ë§ˆë²•ë°©ì–´: false,
                ì‹œê°„ì¡°ì‘: false
            }
        };

        // ğŸŒ ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ ë§ˆë²•ì„ë“¤
        let ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤ = [];
        
        // ğŸ‘¹ ì–´ë‘ ì˜ ì•…ë§ˆ êµ°ë‹¨
        let ì•…ë§ˆêµ°ë‹¨ = [];
        
        // âœ¨ ë§ˆë²• íš¨ê³¼ ì…ìë“¤
        let ë§ˆë²•ì…ìë“¤ = [];
        
        // ğŸ­ í˜„ì¬ ì´ì•¼ê¸° ì¥ë©´ë“¤
        const ì´ì•¼ê¸°ì¥ë©´ë“¤ = [
            {
                ì±•í„°: 1,
                ì œëª©: "ì„¸ê³„ì˜ íƒ„ìƒ",
                ë‚´ìš©: "ë””ì§€í„¸ ì™•êµ­ì— ìƒˆë¡œìš´ ì„¸ê³„ê°€ ì°½ì¡°ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ íˆì–´ë¡œê°€ ê¹¨ì–´ë‚©ë‹ˆë‹¤...",
                í€˜ìŠ¤íŠ¸: "ì˜ì›…ì˜ ì¡´ì¬ë¥¼ ì„¸ê³„ì— ì•Œë¦¬ì‹­ì‹œì˜¤"
            },
            {
                ì±•í„°: 2,
                ì œëª©: "ì›€ì§ì„ì˜ ê°ì„±",
                ë‚´ìš©: "ê³ ëŒ€ì˜ ì´ë™ ë§ˆë²•ì„ í„°ë“í–ˆìŠµë‹ˆë‹¤! ì´ì œ ì˜ì›…ì´ ììœ ë¡­ê²Œ ì„¸ê³„ë¥¼ íƒí—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                í€˜ìŠ¤íŠ¸: "í™”ì‚´í‘œ í‚¤ë¡œ ì„¸ê³„ë¥¼ íƒí—˜í•˜ì‹­ì‹œì˜¤"
            },
            {
                ì±•í„°: 3,
                ì œëª©: "í•˜ëŠ˜ì„ ë‚˜ëŠ” ë²•",
                ë‚´ìš©: "ì²œê³µì˜ ë§ˆë²•ì„ ë°°ì› ìŠµë‹ˆë‹¤! ì¤‘ë ¥ì„ ê±°ìŠ¤ë¥´ëŠ” ì í”„ì˜ í˜ì„ ì–»ì—ˆìŠµë‹ˆë‹¤.",
                í€˜ìŠ¤íŠ¸: "ìŠ¤í˜ì´ìŠ¤ í‚¤ë¡œ í•˜ëŠ˜ë¡œ ë›°ì–´ì˜¤ë¥´ì‹­ì‹œì˜¤"
            },
            {
                ì±•í„°: 4,
                ì œëª©: "ë°”ë‚˜ë‚˜ ë§ˆë²•ì˜ ì „ìˆ˜",
                ë‚´ìš©: "ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ ë§ˆë²•ì„ ìŠµë“í–ˆìŠµë‹ˆë‹¤! í™©ê¸ˆë¹› ë§ˆë²• ë°”ë‚˜ë‚˜ë¡œ ì•…ë§ˆë“¤ì„ ë¬¼ë¦¬ì¹˜ì„¸ìš”.",
                í€˜ìŠ¤íŠ¸: "Zí‚¤ë¡œ ë°”ë‚˜ë‚˜ ë§ˆë²•ì„ ë°œì‚¬í•˜ì‹­ì‹œì˜¤"
            },
            {
                ì±•í„°: 5,
                ì œëª©: "ì–´ë‘ ì˜ ì¹¨ì…",
                ë‚´ìš©: "í‰í™”ë¡œìš´ ì™•êµ­ì— ì–´ë‘ ì˜ ì•…ë§ˆë“¤ì´ ì¹¨ì…í–ˆìŠµë‹ˆë‹¤! ì˜ì›…ì˜ ì§„ì •í•œ ëª¨í—˜ì´ ì‹œì‘ë©ë‹ˆë‹¤.",
                í€˜ìŠ¤íŠ¸: "ì•…ë§ˆë“¤ì„ ë¬¼ë¦¬ì¹˜ê³  ì™•êµ­ì„ êµ¬í•˜ì‹­ì‹œì˜¤"
            },
            {
                ì±•í„°: 6,
                ì œëª©: "ì „ì„¤ì˜ ì™„ì„±",
                ë‚´ìš©: "ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì‹ ì€ ì§„ì •í•œ ì „ì„¤ì˜ ì˜ì›…ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!",
                í€˜ìŠ¤íŠ¸: "ì˜ì›íˆ ê¸°ì–µë  ì „ì„¤ì„ ë§Œë“œì‹­ì‹œì˜¤"
            }
        ];

        // âŒ¨ï¸ ë§ˆë²•ì˜ í‚¤ ì •ë ¹ê³¼ì˜ ê³„ì•½
        const ë§ˆë²•ì˜í‚¤ë“¤ = {};
        
        document.addEventListener('keydown', (ë§ˆë²•ì£¼ë¬¸) => {
            ë§ˆë²•ì˜í‚¤ë“¤[ë§ˆë²•ì£¼ë¬¸.key] = true;
            
            // ë°”ë‚˜ë‚˜ ë§ˆë²• ë°œë™!
            if ((ë§ˆë²•ì£¼ë¬¸.key === 'z' || ë§ˆë²•ì£¼ë¬¸.key === 'Z') && !ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ) {
                ë°”ë‚˜ë‚˜ë§ˆë²•ë°œì‚¬();
            }
            
            // ëª¨í—˜ ì¬ì‹œì‘ì˜ ì£¼ë¬¸
            if ((ë§ˆë²•ì£¼ë¬¸.key === 'r' || ë§ˆë²•ì£¼ë¬¸.key === 'R') && ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ) {
                ìƒˆë¡œìš´ëª¨í—˜ì‹œì‘();
            }
        });

        document.addEventListener('keyup', (ë§ˆë²•ì£¼ë¬¸) => {
            ë§ˆë²•ì˜í‚¤ë“¤[ë§ˆë²•ì£¼ë¬¸.key] = false;
        });

        // ğŸŒŸ ë³„ë“¤ ìƒì„± (ë°°ê²½ íš¨ê³¼)
        function ë³„ë“¤ì„ë¿Œë ¤ë¼() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        // ğŸŒ ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ ë§ˆë²• ë°œì‚¬
        function ë°”ë‚˜ë‚˜ë§ˆë²•ë°œì‚¬() {
            const ìƒˆë¡œìš´ë§ˆë²•ë°”ë‚˜ë‚˜ = {
                x: ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„,
                y: ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´ / 2,
                ë„ˆë¹„: 20,
                ë†’ì´: 12,
                ì†ë„: 15,
                ë§ˆë²•ë ¥: 1,
                ìƒ‰ìƒ: '#f1c40f',
                ê¶¤ì : [],
                ìƒì„±ì‹œê°„: Date.now()
            };
            
            ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.push(ìƒˆë¡œìš´ë§ˆë²•ë°”ë‚˜ë‚˜);
            
            // ë§ˆë²• ë°œì‚¬ íš¨ê³¼
            ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, '#f1c40f', 8);
            
            console.log("âœ¨ ë°”ë‚˜ë‚˜ ë§ˆë²• ë°œì‚¬! í™©ê¸ˆë¹› ë§ˆë²•ì´ ì–´ë‘ ì„ ê°€ë¥¸ë‹¤!");
            
            // ì²« ë§ˆë²• ì‚¬ìš© ì‹œ ì´ì•¼ê¸° ì§„í–‰
            if (ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° === 4 && ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.length === 1) {
                ì´ì•¼ê¸°ì§„í–‰(5);
            }
        }

        // ğŸ‘¹ ì•…ë§ˆ ì†Œí™˜ ì˜ì‹
        function ì•…ë§ˆì†Œí™˜() {
            const ì•…ë§ˆì¢…ë¥˜ë“¤ = [
                { ì´ë¦„: "í™”ì—¼ì•…ë§ˆ", ìƒ‰ìƒ: '#e74c3c', ì†ë„: 2, ì ìˆ˜: 15, í¬ê¸°: 35 },
                { ì´ë¦„: "ì–¼ìŒì•…ë§ˆ", ìƒ‰ìƒ: '#3498db', ì†ë„: 1.5, ì ìˆ˜: 20, í¬ê¸°: 40 },
                { ì´ë¦„: "ë²ˆê°œì•…ë§ˆ", ìƒ‰ìƒ: '#9b59b6', ì†ë„: 3, ì ìˆ˜: 25, í¬ê¸°: 30 }
            ];
            
            const ì„ íƒëœì•…ë§ˆ = ì•…ë§ˆì¢…ë¥˜ë“¤[Math.floor(Math.random() * ì•…ë§ˆì¢…ë¥˜ë“¤.length)];
            
            const ìƒˆì•…ë§ˆ = {
                ì´ë¦„: ì„ íƒëœì•…ë§ˆ.ì´ë¦„,
                x: ì‹ ë¹„í•œìº”ë²„ìŠ¤.width,
                y: 300,
                ë„ˆë¹„: ì„ íƒëœì•…ë§ˆ.í¬ê¸°,
                ë†’ì´: ì„ íƒëœì•…ë§ˆ.í¬ê¸° + 10,
                ì†ë„: -ì„ íƒëœì•…ë§ˆ.ì†ë„ * (1 + ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° * 0.2),
                ìƒ‰ìƒ: ì„ íƒëœì•…ë§ˆ.ìƒ‰ìƒ,
                ì ìˆ˜ê°’: ì„ íƒëœì•…ë§ˆ.ì ìˆ˜,
                ìƒëª…ë ¥: 1,
                ë¯¸ë„ëŸ¬ì§€ëŠ”ì¤‘: false,
                ìƒì„±ì‹œê°„: Date.now()
            };
            
            ì•…ë§ˆêµ°ë‹¨.push(ìƒˆì•…ë§ˆ);
            console.log(`âš ï¸ ${ì„ íƒëœì•…ë§ˆ.ì´ë¦„}ì´ ì–´ë‘ ì—ì„œ ë‚˜íƒ€ë‚¬ë‹¤!`);
        }

        // âœ¨ ë§ˆë²• ì…ì íš¨ê³¼ ìƒì„±
        function ë§ˆë²•ì…ììƒì„±(x, y, ìƒ‰ìƒ, ê°œìˆ˜) {
            for (let i = 0; i < ê°œìˆ˜; i++) {
                ë§ˆë²•ì…ìë“¤.push({
                    x: x,
                    y: y,
                    ì†ë„x: (Math.random() - 0.5) * 10,
                    ì†ë„y: (Math.random() - 0.5) * 10,
                    ìƒ‰ìƒ: ìƒ‰ìƒ,
                    ìƒëª…: 40 + Math.random() * 20,
                    ìµœëŒ€ìƒëª…: 60,
                    í¬ê¸°: 2 + Math.random() * 4
                });
            }
        }

        // ğŸ† ì—…ì  ë‹¬ì„± ì•Œë¦¼
        function ì—…ì ë‹¬ì„±ì•Œë¦¼(ì œëª©, ì„¤ëª…) {
            const notification = document.createElement('div');
            notification.className = 'achievement-notification';
            notification.innerHTML = `ğŸ† ${ì œëª©}<br><small>${ì„¤ëª…}</small>`;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 500);
            }, 3000);
            
            console.log(`ğŸ† ì—…ì  ë‹¬ì„±: ${ì œëª©} - ${ì„¤ëª…}`);
        }

        // ğŸ“– ì´ì•¼ê¸° ì§„í–‰
        function ì´ì•¼ê¸°ì§„í–‰(ìƒˆì±•í„°) {
            if (ìƒˆì±•í„° <= ì´ì•¼ê¸°ì¥ë©´ë“¤.length && ìƒˆì±•í„° > ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„°) {
                ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° = ìƒˆì±•í„°;
                const í˜„ì¬ì¥ë©´ = ì´ì•¼ê¸°ì¥ë©´ë“¤[ìƒˆì±•í„° - 1];
                
                ì´ì•¼ê¸°íŒ¨ë„.textContent = í˜„ì¬ì¥ë©´.ë‚´ìš©;
                í€˜ìŠ¤íŠ¸ì •ë³´.textContent = í˜„ì¬ì¥ë©´.í€˜ìŠ¤íŠ¸;
                
                // ì±•í„° ì§„í–‰ ì‹œ íŠ¹ë³„ íš¨ê³¼
                ë§ˆë²•ì…ììƒì„±(400, 200, '#f39c12', 20);
                
                console.log(`ğŸ“– ${í˜„ì¬ì¥ë©´.ì œëª©} - ${í˜„ì¬ì¥ë©´.ë‚´ìš©}`);
                
                // ì—…ì  ì²´í¬
                switch(ìƒˆì±•í„°) {
                    case 2:
                        ì—…ì ë‹¬ì„±ì•Œë¦¼("ì²« ê±¸ìŒ", "ì˜ì›…ì´ ì²« ì›€ì§ì„ì„ ì‹œì‘í–ˆìŠµë‹ˆë‹¤!");
                        break;
                    case 4:
                        ì—…ì ë‹¬ì„±ì•Œë¦¼("ë§ˆë²•ì‚¬", "ë°”ë‚˜ë‚˜ ë§ˆë²•ì„ ìŠµë“í–ˆìŠµë‹ˆë‹¤!");
                        break;
                    case 5:
                        ì—…ì ë‹¬ì„±ì•Œë¦¼("ì „ì‚¬", "ì²« ì•…ë§ˆì™€ ì¡°ìš°í–ˆìŠµë‹ˆë‹¤!");
                        break;
                }
            }
        }

        // ğŸ¯ ê²Œì„ ì„¸ê³„ ì—…ë°ì´íŠ¸
        function ì„¸ê³„ì—…ë°ì´íŠ¸() {
            if (ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ) return;

            // ì˜ì›…ì˜ ì´ë™ ë§ˆë²•
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„ *= 0.8; // ë¶€ë“œëŸ¬ìš´ ë©ˆì¶¤
            
            if (ë§ˆë²•ì˜í‚¤ë“¤['ArrowLeft'] && ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ > 0) {
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„ = Math.max(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„ - 1, -6);
                
                // ì²« ì´ë™ ì‹œ ì´ì•¼ê¸° ì§„í–‰
                if (ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° === 1) {
                    ì´ì•¼ê¸°ì§„í–‰(2);
                }
            }
            
            if (ë§ˆë²•ì˜í‚¤ë“¤['ArrowRight'] && ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ < ì‹ ë¹„í•œìº”ë²„ìŠ¤.width - ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„) {
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„ = Math.min(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„ + 1, 6);
                
                if (ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° === 1) {
                    ì´ì•¼ê¸°ì§„í–‰(2);
                }
            }
            
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ += ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„;

            // ì í”„ì˜ ë§ˆë²• (ì²œê³µìˆ )
            if (ë§ˆë²•ì˜í‚¤ë“¤[' '] && ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë•…ì—ìˆë‹ˆ) {
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ì í”„ë ¥ = -16;
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë•…ì—ìˆë‹ˆ = false;
                
                // ì í”„ íš¨ê³¼
                ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´, '#3498db', 6);
                
                console.log("ğŸ¦¸â€â™‚ï¸ ì˜ì›…ì´ ì²œê³µìˆ ë¡œ í•˜ëŠ˜ë¡œ ë›°ì–´ì˜¤ë¥¸ë‹¤!");
                
                // ì²« ì í”„ ì‹œ ì´ì•¼ê¸° ì§„í–‰
                if (ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° === 2) {
                    ì´ì•¼ê¸°ì§„í–‰(3);
                }
            }

            // ì¤‘ë ¥ì˜ ë²•ì¹™
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ì í”„ë ¥ += 0.8;
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ += ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ì í”„ë ¥;

            // ëŒ€ì§€ì™€ì˜ ì¶©ëŒ
            if (ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ > 300) {
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ = 300;
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ì í”„ë ¥ = 0;
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë•…ì—ìˆë‹ˆ = true;
            }

            // ë§ˆë²• ë°”ë‚˜ë‚˜ë“¤ì˜ ì—¬í–‰
            ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.forEach((ë°”ë‚˜ë‚˜, ìˆœì„œ) => {
                ë°”ë‚˜ë‚˜.x += ë°”ë‚˜ë‚˜.ì†ë„;
                
                // ë§ˆë²• ê¶¤ì  ìƒì„±
                ë°”ë‚˜ë‚˜.ê¶¤ì .push({ x: ë°”ë‚˜ë‚˜.x, y: ë°”ë‚˜ë‚˜.y, ì‹œê°„: Date.now() });
                if (ë°”ë‚˜ë‚˜.ê¶¤ì .length > 8) ë°”ë‚˜ë‚˜.ê¶¤ì .shift();
                
                // ì„¸ê³„ ëì— ë„ë‹¬í•œ ë°”ë‚˜ë‚˜ëŠ” ë³„ì´ ë˜ì–´ ì‚¬ë¼ì§„ë‹¤
                if (ë°”ë‚˜ë‚˜.x > ì‹ ë¹„í•œìº”ë²„ìŠ¤.width) {
                    ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.splice(ìˆœì„œ, 1);
                    ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜.x, ë°”ë‚˜ë‚˜.y, '#f1c40f', 5);
                }
            });

            // ì•…ë§ˆë“¤ì˜ ì¹¨ì… (ì±•í„° 4 ì´í›„)
            if (ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° >= 4) {
                if (Math.random() < 0.008 + ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° * 0.002) {
                    ì•…ë§ˆì†Œí™˜();
                }
            }

            // ì•…ë§ˆë“¤ì˜ í–‰ì§„
            ì•…ë§ˆêµ°ë‹¨.forEach((ì•…ë§ˆ, ìˆœì„œ) => {
                if (ì•…ë§ˆ.ë¯¸ë„ëŸ¬ì§€ëŠ”ì¤‘) {
                    ì•…ë§ˆ.x += 8; // ë¯¸ë„ëŸ¬ì§€ë©° ë„ë§
                } else {
                    ì•…ë§ˆ.x += ì•…ë§ˆ.ì†ë„;
                }
                
                // í™”ë©´ ë°–ìœ¼ë¡œ ì‚¬ë¼ì§„ ì•…ë§ˆ
                if (ì•…ë§ˆ.x < -ì•…ë§ˆ.ë„ˆë¹„ || ì•…ë§ˆ.x > ì‹ ë¹„í•œìº”ë²„ìŠ¤.width + ì•…ë§ˆ.ë„ˆë¹„) {
                    ì•…ë§ˆêµ°ë‹¨.splice(ìˆœì„œ, 1);
                }
            });

            // ë§ˆë²• ì…ìë“¤ì˜ ì¶¤
            ë§ˆë²•ì…ìë“¤.forEach((ì…ì, ìˆœì„œ) => {
                ì…ì.x += ì…ì.ì†ë„x;
                ì…ì.y += ì…ì.ì†ë„y;
                ì…ì.ì†ë„x *= 0.98;
                ì…ì.ì†ë„y *= 0.98;
                ì…ì.ìƒëª…--;
                
                if (ì…ì.ìƒëª… <= 0) {
                    ë§ˆë²•ì…ìë“¤.splice(ìˆœì„œ, 1);
                }
            });

            // ì „íˆ¬ì˜ íŒì •
            ì „íˆ¬íŒì •();
            
            // ì²« ë§ˆë²• ì‚¬ìš© ì‹œ ì´ì•¼ê¸° ì§„í–‰
            if (ì „ì„¤ìƒíƒœ.í˜„ì¬ì±•í„° === 3 && ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.length > 0) {
                ì´ì•¼ê¸°ì§„í–‰(4);
            }
            
            // UI ì—…ë°ì´íŠ¸
            UIì—…ë°ì´íŠ¸();
        }

        // âš”ï¸ ì „íˆ¬ íŒì • ì‹œìŠ¤í…œ
        function ì „íˆ¬íŒì •() {
            // ë°”ë‚˜ë‚˜ ë§ˆë²•ê³¼ ì•…ë§ˆì˜ ì¶©ëŒ
            ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.forEach((ë°”ë‚˜ë‚˜, ë°”ë‚˜ë‚˜ìˆœì„œ) => {
                ì•…ë§ˆêµ°ë‹¨.forEach((ì•…ë§ˆ, ì•…ë§ˆìˆœì„œ) => {
                    if (!ì•…ë§ˆ.ë¯¸ë„ëŸ¬ì§€ëŠ”ì¤‘ &&
                        ë°”ë‚˜ë‚˜.x < ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„ &&
                        ë°”ë‚˜ë‚˜.x + ë°”ë‚˜ë‚˜.ë„ˆë¹„ > ì•…ë§ˆ.x &&
                        ë°”ë‚˜ë‚˜.y < ì•…ë§ˆ.y + ì•…ë§ˆ.ë†’ì´ &&
                        ë°”ë‚˜ë‚˜.y + ë°”ë‚˜ë‚˜.ë†’ì´ > ì•…ë§ˆ.y) {
                        
                        // ë§ˆë²• ëª…ì¤‘! ëŒ€í­ë°œ íš¨ê³¼
                        ë§ˆë²•ì…ììƒì„±(ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„/2, ì•…ë§ˆ.y + ì•…ë§ˆ.ë†’ì´/2, ì•…ë§ˆ.ìƒ‰ìƒ, 15);
                        ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜.x, ë°”ë‚˜ë‚˜.y, '#f1c40f', 8);
                        
                        // ì•…ë§ˆê°€ ë¯¸ë„ëŸ¬ì§€ë©° ë„ë§
                        ì•…ë§ˆ.ë¯¸ë„ëŸ¬ì§€ëŠ”ì¤‘ = true;
                        ì•…ë§ˆ.ìƒ‰ìƒ = '#95a5a6'; // íšŒìƒ‰ìœ¼ë¡œ ë³€í•¨
                        
                        // ì „ì„¤ ì ìˆ˜ íšë“
                        ì „ì„¤ìƒíƒœ.ì ìˆ˜ += ì•…ë§ˆ.ì ìˆ˜ê°’;
                        ì „ì„¤ìƒíƒœ.ë§ˆë²•ì„ += 1;
                        ì „ì„¤ìƒíƒœ.ì²˜ì¹˜í•œì•…ë§ˆ += 1;
                        
                        // ë§ˆë²•ë°”ë‚˜ë‚˜ ì†Œë©¸
                        ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.splice(ë°”ë‚˜ë‚˜ìˆœì„œ, 1);
                        
                        console.log(`ğŸ’¥ ${ì•…ë§ˆ.ì´ë¦„} ê²©í‡´! ì „ì„¤ ì ìˆ˜ +${ì•…ë§ˆ.ì ìˆ˜ê°’}! ì´ ì ìˆ˜: ${ì „ì„¤ìƒíƒœ.ì ìˆ˜}`);
                        
                        // íŠ¹ë³„ ì—…ì  ì²´í¬
                        if (ì „ì„¤ìƒíƒœ.ì²˜ì¹˜í•œì•…ë§ˆ === 1) {
                            ì—…ì ë‹¬ì„±ì•Œë¦¼("ì²« ìŠ¹ë¦¬", "ì²« ì•…ë§ˆë¥¼ ë¬¼ë¦¬ì³¤ìŠµë‹ˆë‹¤!");
                        }
                        if (ì „ì„¤ìƒíƒœ.ì ìˆ˜ >= 100) {
                            ì—…ì ë‹¬ì„±ì•Œë¦¼("ë°±ì¸ì¥", "100ì ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤!");
                        }
                        
                        // ë„ë§ê°€ëŠ” ì•…ë§ˆëŠ” 1ì´ˆ í›„ ì™„ì „íˆ ì‚¬ë¼ì§
                        setTimeout(() => {
                            const ì¸ë±ìŠ¤ = ì•…ë§ˆêµ°ë‹¨.indexOf(ì•…ë§ˆ);
                            if (ì¸ë±ìŠ¤ > -1) {
                                ì•…ë§ˆêµ°ë‹¨.splice(ì¸ë±ìŠ¤, 1);
                                console.log(`${ì•…ë§ˆ.ì´ë¦„}ì´ ì–´ë‘  ì†ìœ¼ë¡œ ì™„ì „íˆ ì‚¬ë¼ì¡Œë‹¤...`);
                            }
                        }, 1000);
                    }
                });
            });

            // ì˜ì›…ê³¼ ì•…ë§ˆì˜ ì¶©ëŒ
            if (!ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ) {
                ì•…ë§ˆêµ°ë‹¨.forEach((ì•…ë§ˆ, ìˆœì„œ) => {
                    if (!ì•…ë§ˆ.ë¯¸ë„ëŸ¬ì§€ëŠ”ì¤‘ &&
                        ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ < ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„ &&
                        ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„ > ì•…ë§ˆ.x &&
                        ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ < ì•…ë§ˆ.y + ì•…ë§ˆ.ë†’ì´ &&
                        ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´ > ì•…ë§ˆ.y) {
                        
                        // ì˜ì›…ì´ í”¼í•´ë¥¼ ì…ìŒ
                        ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìƒëª…ë ¥--;
                        ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ = true;
                        
                        // í”¼í•´ íš¨ê³¼
                        ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, '#e74c3c', 12);
                        
                        // ì•…ë§ˆ ì œê±°
                        ì•…ë§ˆêµ°ë‹¨.splice(ìˆœì„œ, 1);
                        
                        console.log(`ğŸ’” ì˜ì›…ì´ í”¼í•´ë¥¼ ì…ì—ˆë‹¤! ë‚¨ì€ ìƒëª…ë ¥: ${ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìƒëª…ë ¥}`);
                        
                        // 2ì´ˆ ë¬´ì  ì‹œê°„
                        setTimeout(() => {
                            ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ = false;
                        }, 2000);
                        
                        // ê²Œì„ ì˜¤ë²„ ì²´í¬
                        if (ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìƒëª…ë ¥ <= 0) {
                            ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ = true;
                            console.log("ğŸ’€ ì˜ì›…ì´ ì“°ëŸ¬ì¡Œë‹¤... í•˜ì§€ë§Œ ì „ì„¤ì€ ì˜ì›íˆ ê¸°ì–µë  ê²ƒì´ë‹¤!");
                        }
                    }
                });
            }
        }

        // ğŸ“Š UI ì •ë³´ ì—…ë°ì´íŠ¸
        function UIì—…ë°ì´íŠ¸() {
            document.getElementById('legendScore').textContent = ì „ì„¤ìƒíƒœ.ì ìˆ˜;
            document.getElementById('magicStones').textContent = ì „ì„¤ìƒíƒœ.ë§ˆë²•ì„;
            document.getElementById('defeatedDemons').textContent = ì „ì„¤ìƒíƒœ.ì²˜ì¹˜í•œì•…ë§ˆ;
        }

        // ğŸ¨ ì‹ ë¹„í•œ ì„¸ê³„ ê·¸ë¦¬ê¸°
        function ì„¸ê³„ê·¸ë¦¬ê¸°() {
            // í™”ë©´ ì§€ìš°ê¸°
            ë§ˆë²•ì˜ë¶“.clearRect(0, 0, ì‹ ë¹„í•œìº”ë²„ìŠ¤.width, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height);

            // ì‹ ë¹„í•œ êµ¬ë¦„ë“¤
            ë§ˆë²•ì˜ë¶“.fillStyle = 'rgba(255, 255, 255, 0.6)';
            for (let i = 0; i < 6; i++) {
                const x = (i * 150 + Date.now() * 0.02) % (ì‹ ë¹„í•œìº”ë²„ìŠ¤.width + 120);
                const y = 60 + Math.sin(Date.now() * 0.001 + i) * 30;
                ë§ˆë²•ì˜ë¶“.beginPath();
                ë§ˆë²•ì˜ë¶“.arc(x, y, 20, 0, Math.PI * 2);
                ë§ˆë²•ì˜ë¶“.arc(x + 15, y, 25, 0, Math.PI * 2);
                ë§ˆë²•ì˜ë¶“.arc(x + 30, y, 20, 0, Math.PI * 2);
                ë§ˆë²•ì˜ë¶“.fill();
            }

            // ì‹ ì„±í•œ ëŒ€ì§€
            const ëŒ€ì§€ê·¸ë¼ë””ì–¸íŠ¸ = ë§ˆë²•ì˜ë¶“.createLinearGradient(0, 340, 0, 400);
            ëŒ€ì§€ê·¸ë¼ë””ì–¸íŠ¸.addColorStop(0, '#27ae60');
            ëŒ€ì§€ê·¸ë¼ë””ì–¸íŠ¸.addColorStop(1, '#1e8449');
            ë§ˆë²•ì˜ë¶“.fillStyle = ëŒ€ì§€ê·¸ë¼ë””ì–¸íŠ¸;
            ë§ˆë²•ì˜ë¶“.fillRect(0, 340, ì‹ ë¹„í•œìº”ë²„ìŠ¤.width, 60);

            // ì „ì„¤ì˜ ë°”ë‚˜ë‚˜ íˆì–´ë¡œ (ë¬´ì  ì‹œ ê¹œë¹¡ì„)
            if (!ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ || Math.floor(Date.now() / 200) % 2) {
                // ì˜ì›…ì˜ ì˜¤ë¼
                const ì˜ì›…ì˜¤ë¼ = ë§ˆë²•ì˜ë¶“.createRadialGradient(
                    ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, 0,
                    ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, 35
                );
                ì˜ì›…ì˜¤ë¼.addColorStop(0, 'rgba(241, 196, 15, 0.3)');
                ì˜ì›…ì˜¤ë¼.addColorStop(1, 'rgba(241, 196, 15, 0)');
                ë§ˆë²•ì˜ë¶“.fillStyle = ì˜ì›…ì˜¤ë¼;
                ë§ˆë²•ì˜ë¶“.fillRect(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ - 10, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ - 10, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„ + 20, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´ + 20);
                
                // ì˜ì›… ë³¸ì²´
                ë§ˆë²•ì˜ë¶“.fillStyle = ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìƒ‰ìƒ;
                ë§ˆë²•ì˜ë¶“.fillRect(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´);
                
                // ì˜ì›…ì˜ ì™•ê´€
                ë§ˆë²•ì˜ë¶“.fillStyle = '#f1c40f';
                ë§ˆë²•ì˜ë¶“.beginPath();
                ë§ˆë²•ì˜ë¶“.arc(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + 15, 18, 0, Math.PI * 2);
                ë§ˆë²•ì˜ë¶“.fill();
                
                // ì˜ì›…ì˜ ëˆˆ (ì§€í˜œì˜ ë¹›)
                ë§ˆë²•ì˜ë¶“.fillStyle = '#2c3e50';
                ë§ˆë²•ì˜ë¶“.fillRect(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + 15, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + 10, 4, 4);
                ë§ˆë²•ì˜ë¶“.fillRect(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + 30, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + 10, 4, 4);
                
                // ì˜ì›…ì˜ ë¯¸ì†Œ
                ë§ˆë²•ì˜ë¶“.strokeStyle = '#2c3e50';
                ë§ˆë²•ì˜ë¶“.lineWidth = 2;
                ë§ˆë²•ì˜ë¶“.beginPath();
                ë§ˆë²•ì˜ë¶“.arc(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + 20, 8, 0, Math.PI);
                ë§ˆë²•ì˜ë¶“.stroke();
            }

            // ìƒëª…ë ¥ í•˜íŠ¸ë“¤
            for (let i = 0; i < ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìµœëŒ€ìƒëª…ë ¥; i++) {
                ë§ˆë²•ì˜ë¶“.fillStyle = i < ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìƒëª…ë ¥ ? '#e74c3c' : '#7f8c8d';
                ë§ˆë²•ì˜ë¶“.font = '20px Arial';
                ë§ˆë²•ì˜ë¶“.fillText('ğŸ’–', 10 + i * 30, 30);
            }

            // ë§ˆë²• ë°”ë‚˜ë‚˜ë“¤ì˜ ê¶¤ì ê³¼ ê´‘ì±„
            ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤.forEach(ë°”ë‚˜ë‚˜ => {
                // ë§ˆë²• ê¶¤ì 
                ë°”ë‚˜ë‚˜.ê¶¤ì .forEach((ì , ì¸ë±ìŠ¤) => {
                    const íˆ¬ëª…ë„ = ì¸ë±ìŠ¤ / ë°”ë‚˜ë‚˜.ê¶¤ì .length;
                    ë§ˆë²•ì˜ë¶“.fillStyle = `rgba(241, 196, 15, ${íˆ¬ëª…ë„ * 0.6})`;
                    ë§ˆë²•ì˜ë¶“.fillRect(ì .x - 2, ì .y - 2, 4, 4);
                });
                
                // ë°”ë‚˜ë‚˜ ë³¸ì²´ (í™©ê¸ˆ ë¹›)
                ë§ˆë²•ì˜ë¶“.fillStyle = ë°”ë‚˜ë‚˜.ìƒ‰ìƒ;
                ë§ˆë²•ì˜ë¶“.fillRect(ë°”ë‚˜ë‚˜.x, ë°”ë‚˜ë‚˜.y, ë°”ë‚˜ë‚˜.ë„ˆë¹„, ë°”ë‚˜ë‚˜.ë†’ì´);
                
                // ë§ˆë²• ì˜¤ë¼
                ë§ˆë²•ì˜ë¶“.fillStyle = 'rgba(241, 196, 15, 0.4)';
                ë§ˆë²•ì˜ë¶“.fillRect(ë°”ë‚˜ë‚˜.x - 2, ë°”ë‚˜ë‚˜.y - 2, ë°”ë‚˜ë‚˜.ë„ˆë¹„ + 4, ë°”ë‚˜ë‚˜.ë†’ì´ + 4);
            });

            // ì–´ë‘ ì˜ ì•…ë§ˆë“¤
            ì•…ë§ˆêµ°ë‹¨.forEach(ì•…ë§ˆ => {
                // ì•…ë§ˆì˜ ì–´ë‘  ì˜¤ë¼
                const ì–´ë‘ ì˜¤ë¼ = ë§ˆë²•ì˜ë¶“.createRadialGradient(
                    ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„/2, ì•…ë§ˆ.y + ì•…ë§ˆ.ë†’ì´/2, 0,
                    ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„/2, ì•…ë§ˆ.y + ì•…ë§ˆ.ë†’ì´/2, 30
                );
                ì–´ë‘ ì˜¤ë¼.addColorStop(0, `${ì•…ë§ˆ.ìƒ‰ìƒ}40`);
                ì–´ë‘ ì˜¤ë¼.addColorStop(1, 'rgba(0, 0, 0, 0)');
                ë§ˆë²•ì˜ë¶“.fillStyle = ì–´ë‘ ì˜¤ë¼;
                ë§ˆë²•ì˜ë¶“.fillRect(ì•…ë§ˆ.x - 15, ì•…ë§ˆ.y - 15, ì•…ë§ˆ.ë„ˆë¹„ + 30, ì•…ë§ˆ.ë†’ì´ + 30);
                
                // ì•…ë§ˆ ë³¸ì²´
                ë§ˆë²•ì˜ë¶“.fillStyle = ì•…ë§ˆ.ìƒ‰ìƒ;
                ë§ˆë²•ì˜ë¶“.fillRect(ì•…ë§ˆ.x, ì•…ë§ˆ.y, ì•…ë§ˆ.ë„ˆë¹„, ì•…ë§ˆ.ë†’ì´);
                
                // ì•…ë§ˆì˜ ë¿”
                ë§ˆë²•ì˜ë¶“.fillStyle = '#2c3e50';
                ë§ˆë²•ì˜ë¶“.fillRect(ì•…ë§ˆ.x + 5, ì•…ë§ˆ.y, 3, 8);
                ë§ˆë²•ì˜ë¶“.fillRect(ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„ - 8, ì•…ë§ˆ.y, 3, 8);
                
                // ì•…ë§ˆì˜ ë¶ˆíƒ€ëŠ” ëˆˆ
                ë§ˆë²•ì˜ë¶“.fillStyle = '#f39c12';
                ë§ˆë²•ì˜ë¶“.fillRect(ì•…ë§ˆ.x + 8, ì•…ë§ˆ.y + 12, 4, 4);
                ë§ˆë²•ì˜ë¶“.fillRect(ì•…ë§ˆ.x + ì•…ë§ˆ.ë„ˆë¹„ - 12, ì•…ë§ˆ.y + 12, 4, 4);
                
                // ë¯¸ë„ëŸ¬ì§€ëŠ” ìƒíƒœ í‘œì‹œ
                if (ì•…ë§ˆ.ë¯¸ë„ëŸ¬ì§€ëŠ”ì¤‘) {
                    ë§ˆë²•ì˜ë¶“.fillStyle = '#f1c40f';
                    ë§ˆë²•ì˜ë¶“.font = '16px Arial';
                    ë§ˆë²•ì˜ë¶“.fillText('ğŸ’«', ì•…ë§ˆ.x + 5, ì•…ë§ˆ.y - 5);
                }
            });

            // ë§ˆë²• ì…ìë“¤ì˜ ì¶¤
            ë§ˆë²•ì…ìë“¤.forEach(ì…ì => {
                const íˆ¬ëª…ë„ = ì…ì.ìƒëª… / ì…ì.ìµœëŒ€ìƒëª…;
                ë§ˆë²•ì˜ë¶“.fillStyle = ì…ì.ìƒ‰ìƒ.replace('rgb', 'rgba').replace(')', `, ${íˆ¬ëª…ë„})`);
                ë§ˆë²•ì˜ë¶“.beginPath();
                ë§ˆë²•ì˜ë¶“.arc(ì…ì.x, ì…ì.y, ì…ì.í¬ê¸° * íˆ¬ëª…ë„, 0, Math.PI * 2);
                ë§ˆë²•ì˜ë¶“.fill();
            });

            // ê²Œì„ ì¢…ë£Œ ì‹œ ì „ì„¤ì˜ ê¸°ë¡
            if (ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ) {
                ë§ˆë²•ì˜ë¶“.fillStyle = 'rgba(0, 0, 0, 0.9)';
                ë§ˆë²•ì˜ë¶“.fillRect(0, 0, ì‹ ë¹„í•œìº”ë²„ìŠ¤.width, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height);
                
                ë§ˆë²•ì˜ë¶“.fillStyle = '#f1c40f';
                ë§ˆë²•ì˜ë¶“.font = 'bold 36px Cinzel';
                ë§ˆë²•ì˜ë¶“.textAlign = 'center';
                ë§ˆë²•ì˜ë¶“.fillText('âš”ï¸ ì „ì„¤ ì™„ë£Œ âš”ï¸', ì‹ ë¹„í•œìº”ë²„ìŠ¤.width/2, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height/2 - 80);
                
                ë§ˆë²•ì˜ë¶“.fillStyle = '#ecf0f1';
                ë§ˆë²•ì˜ë¶“.font = '20px Cinzel';
                ë§ˆë²•ì˜ë¶“.fillText(`ì „ì„¤ ì ìˆ˜: ${ì „ì„¤ìƒíƒœ.ì ìˆ˜}`, ì‹ ë¹„í•œìº”ë²„ìŠ¤.width/2, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height/2 - 30);
                ë§ˆë²•ì˜ë¶“.fillText(`íšë“ ë§ˆë²•ì„: ${ì „ì„¤ìƒíƒœ.ë§ˆë²•ì„}`, ì‹ ë¹„í•œìº”ë²„ìŠ¤.width/2, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height/2);
                ë§ˆë²•ì˜ë¶“.fillText(`ì²˜ì¹˜í•œ ì•…ë§ˆ: ${ì „ì„¤ìƒíƒœ.ì²˜ì¹˜í•œì•…ë§ˆ}`, ì‹ ë¹„í•œìº”ë²„ìŠ¤.width/2, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height/2 + 30);
                
                ë§ˆë²•ì˜ë¶“.fillStyle = '#3498db';
                ë§ˆë²•ì˜ë¶“.font = '16px Cinzel';
                ë§ˆë²•ì˜ë¶“.fillText('ğŸ”„ Rí‚¤ë¥¼ ëˆŒëŸ¬ ìƒˆë¡œìš´ ì „ì„¤ì„ ì‹œì‘í•˜ì„¸ìš”', ì‹ ë¹„í•œìº”ë²„ìŠ¤.width/2, ì‹ ë¹„í•œìº”ë²„ìŠ¤.height/2 + 80);
                
                ë§ˆë²•ì˜ë¶“.textAlign = 'left';
            }
        }

        // ğŸŒŸ íŠ¹ë³„ ëŠ¥ë ¥ë“¤
        function teleportHero() {
            if (!ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ) {
                ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ = Math.random() * (ì‹ ë¹„í•œìº”ë²„ìŠ¤.width - ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„);
                ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, '#9b59b6', 15);
                console.log("âœ¨ ìˆœê°„ì´ë™ ë§ˆë²• ë°œë™!");
            }
        }

        function castProtection() {
            if (!ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ && !ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ) {
                ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ = true;
                ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, '#3498db', 20);
                console.log("ğŸ›¡ï¸ ë³´í˜¸ ë§ˆë²• ë°œë™! 5ì´ˆê°„ ë¬´ì !");
                setTimeout(() => {
                    ì „ì„¤ìƒíƒœ.ë¬´ì ìƒíƒœ = false;
                    console.log("ğŸ›¡ï¸ ë³´í˜¸ ë§ˆë²•ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
                }, 5000);
            }
        }

        function unleashPower() {
            if (!ì „ì„¤ìƒíƒœ.ê²Œì„ì¢…ë£Œ) {
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => {
                        ë°”ë‚˜ë‚˜ë§ˆë²•ë°œì‚¬();
                    }, i * 100);
                }
                ë§ˆë²•ì…ììƒì„±(ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë„ˆë¹„/2, ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ + ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë†’ì´/2, '#e74c3c', 25);
                console.log("âš¡ í˜ì˜ ê°ì„±! ì—°ì† ë°”ë‚˜ë‚˜ ë§ˆë²•!");
            }
        }

        // ğŸ”„ ìƒˆë¡œìš´ ëª¨í—˜ ì‹œì‘
        function ìƒˆë¡œìš´ëª¨í—˜ì‹œì‘() {
            ì „ì„¤ìƒíƒœ = {
                ì ìˆ˜: 0,
                ë§ˆë²•ì„: 0,
                ì²˜ì¹˜í•œì•…ë§ˆ: 0,
                í˜„ì¬ì±•í„°: 1,
                ì‹œì‘ì‹œê°„: Date.now(),
                ê²Œì„ì¢…ë£Œ: false,
                ë¬´ì ìƒíƒœ: false,
                íŠ¹ë³„ëŠ¥ë ¥: {
                    ìˆœê°„ì´ë™: false,
                    ë³´í˜¸ë§ˆë²•: false,
                    í˜ì˜ê°ì„±: false
                }
            };
            
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.xìœ„ì¹˜ = 100;
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.yìœ„ì¹˜ = 300;
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ì í”„ë ¥ = 0;
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìˆ˜í‰ì†ë„ = 0;
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ë•…ì—ìˆë‹ˆ = true;
            ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìƒëª…ë ¥ = ë°”ë‚˜ë‚˜íˆì–´ë¡œ.ìµœëŒ€ìƒëª…ë ¥;
            
            ë§ˆë²•ë°”ë‚˜ë‚˜ë“¤ = [];
            ì•…ë§ˆêµ°ë‹¨ = [];
            ë§ˆë²•ì…ìë“¤ = [];
            
            // ì²« ë²ˆì§¸ ì´ì•¼ê¸°ë¡œ ëŒì•„ê°€ê¸°
            const ì²«ì¥ë©´ = ì´ì•¼ê¸°ì¥ë©´ë“¤[0];
            ì´ì•¼ê¸°íŒ¨ë„.textContent = ì²«ì¥ë©´.ë‚´ìš©;
            í€˜ìŠ¤íŠ¸ì •ë³´.textContent = ì²«ì¥ë©´.í€˜ìŠ¤íŠ¸;
            
            console.log("ğŸ”„ ìƒˆë¡œìš´ ì „ì„¤ì´ ì‹œì‘ë©ë‹ˆë‹¤!");
        }

        // ğŸ® ì „ì„¤ì˜ ê²Œì„ ë£¨í”„
        function ì „ì„¤ì˜ê²Œì„ë£¨í”„() {
            ì„¸ê³„ì—…ë°ì´íŠ¸();
            ì„¸ê³„ê·¸ë¦¬ê¸°();
            requestAnimationFrame(ì „ì„¤ì˜ê²Œì„ë£¨í”„);
        }

        // ğŸš€ ì „ì„¤ì˜ ì‹œì‘
        console.log("ğŸŒŸ ë°”ë‚˜ë‚˜ íˆì–´ë¡œì˜ ì „ì„¤ - ìŠ¤í† ë¦¬í…”ë§ ëª¨í—˜!");
        console.log("ğŸ“– íŠ¹ì§•:");
        console.log("  - ì„œì‚¬ì  ê²Œì„ ê°œë°œ");
        console.log("  - í•œêµ­ì–´ ë³€ìˆ˜ëª… ì‚¬ìš©");
        console.log("  - íŒíƒ€ì§€ ì„¸ê³„ê´€");
        console.log("  - ì±•í„°ë³„ ì´ì•¼ê¸° ì§„í–‰");
        console.log("  - íŠ¹ë³„ ë§ˆë²• ëŠ¥ë ¥");
        
        ë³„ë“¤ì„ë¿Œë ¤ë¼();
        ì „ì„¤ì˜ê²Œì„ë£¨í”„();
    </script>
</body>
</html>