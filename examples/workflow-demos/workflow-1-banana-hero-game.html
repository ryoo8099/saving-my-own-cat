<!DOCTYPE html>
<html>
<head>
    <title>바나나 히어로의 모험 - 친절한 선생님과 함께</title>
    <style>
        body { 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: #f0f8ff;
            font-family: Arial, sans-serif;
        }
        #gameContainer {
            text-align: center;
        }
        canvas { 
            border: 3px solid #4169e1; 
            background: #87ceeb;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        #gameInfo {
            margin: 15px 0;
            font-size: 24px;
            font-weight: bold;
            color: #2e8b57;
        }
        #instructions {
            margin-top: 15px;
            font-size: 16px;
            color: #555;
            background: #fffacd;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #ffd700;
        }
        .encouragement {
            color: #ff6347;
            font-weight: bold;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div class="encouragement">🎮 우리 함께 멋진 게임을 만들어보자! 🎮</div>
        <div id="gameInfo">점수: 0 🏆</div>
        <canvas id="gameCanvas" width="800" height="400"></canvas>
        <div id="instructions">
            ← → 키로 이동해볼까? | 스페이스로 점프! | Z키로 바나나 던지기! 🍌
        </div>
        <div class="encouragement" id="encouragementText">게임 시작! 정말 잘할 수 있을 거야! ⭐</div>
    </div>

    <script>
        // 🎮 안녕! 우리의 게임 세계를 만들어보자!
        console.log("🎮 게임이 시작되었어! 정말 신나는 모험이 시작될 거야!");
        
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('gameInfo');
        const encouragementDisplay = document.getElementById('encouragementText');

        // 🎯 게임의 기본 설정이야 - 이게 우리 게임의 규칙들이야!
        let gameState = {
            score: 0,
            gameOver: false,
            frameCount: 0,
            encouragementTimer: 0
        };

        // 🐵 우리의 멋진 히어로! 바나나를 좋아하는 용감한 원숭이야!
        const hero = {
            x: 100,
            y: 300,
            width: 50,
            height: 50,
            velocityY: 0,
            isJumping: false,
            color: '#8b4513',
            direction: 1 // 1: 오른쪽, -1: 왼쪽
        };

        // 🍌 바나나들을 담을 상자야! 여기에 던진 바나나들이 들어가요
        let bananas = [];

        // 👹 악당들이 숨어있을 곳이야! 조심해야 해!
        let enemies = [];

        // ⌨️ 키보드 상태 - 어떤 키가 눌렸는지 기억해주는 마법 상자
        const keys = {};

        // 격려 메시지들 - 아이에게 힘을 주는 말들이야!
        const encouragementMessages = [
            "정말 잘하고 있어! ⭐",
            "대단해! 벌써 여기까지! 🚀",
            "네가 만든 게임이 점점 멋져져! 🎮",
            "계속 해보자! 넌 정말 대단해! 💫",
            "와우! 정말 훌륭한 아이디어야! 💡"
        ];

        // 키보드 이벤트 - 키를 눌렀을 때 뭔가 일어나게 하는 마법!
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            // Z키: 바나나 던지기 - 이게 우리의 특별한 무기야!
            if ((e.key === 'z' || e.key === 'Z') && !gameState.gameOver) {
                throwBanana();
                console.log("🍌 바나나 발사! 정말 멋진 던지기야!");
                showEncouragement("멋진 바나나 던지기! 🍌");
            }
            
            // R키: 다시 시작 - 실수해도 괜찮아, 다시 해보자!
            if ((e.key === 'r' || e.key === 'R') && gameState.gameOver) {
                resetGame();
                console.log("🔄 새로운 시작! 이번엔 더 잘할 수 있을 거야!");
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // 🍌 바나나 던지기 함수 - 우리 히어로의 특별한 능력!
        function throwBanana() {
            const newBanana = {
                x: hero.x + (hero.direction > 0 ? hero.width : 0),
                y: hero.y + hero.height / 2,
                width: 20,
                height: 10,
                speed: hero.direction * 12,
                color: '#ffff00'
            };
            bananas.push(newBanana);
            
            // 바나나를 던질 때마다 격려해주자!
            const messages = ["좋은 조준이야! 🎯", "완벽한 타이밍! ⏰", "멋진 던지기! 🌟"];
            showEncouragement(messages[Math.floor(Math.random() * messages.length)]);
        }

        // 👹 악당 생성 함수 - 가끔씩 나타나는 도전거리야!
        function spawnEnemy() {
            enemies.push({
                x: canvas.width,
                y: 300,
                width: 40,
                height: 50,
                speed: -2 - Math.random() * 2, // 조금씩 다른 속도로!
                color: '#ff0000',
                isSlipping: false,
                slipTimer: 0
            });
            console.log("⚠️ 새로운 악당이 나타났어! 하지만 넌 충분히 이길 수 있어!");
        }

        // 격려 메시지 표시 함수
        function showEncouragement(message) {
            encouragementDisplay.textContent = message;
            encouragementDisplay.style.color = '#ff6347';
            setTimeout(() => {
                encouragementDisplay.textContent = "계속 해보자! 정말 잘하고 있어! ⭐";
                encouragementDisplay.style.color = '#2e8b57';
            }, 2000);
        }

        // 🎯 게임 업데이트 함수 - 게임의 모든 일들이 여기서 일어나요!
        function update() {
            if (gameState.gameOver) return;

            gameState.frameCount++;
            gameState.encouragementTimer++;

            // 30초마다 격려 메시지 (1800 프레임)
            if (gameState.encouragementTimer % 1800 === 0) {
                const randomMessage = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
                showEncouragement(randomMessage);
            }

            // 🏃‍♂️ 주인공 이동 - 왼쪽 오른쪽으로 달려보자!
            if (keys['ArrowLeft'] && hero.x > 0) {
                hero.x -= 5;
                hero.direction = -1; // 왼쪽을 보고 있어요
                console.log("🏃‍♂️ 왼쪽으로 달려가는중! 정말 빨라!");
            }
            if (keys['ArrowRight'] && hero.x < canvas.width - hero.width) {
                hero.x += 5;
                hero.direction = 1; // 오른쪽을 보고 있어요
                console.log("🏃‍♂️ 오른쪽으로 달려가는중! 멋져!");
            }

            // 🦘 점프 시스템 - 하늘 높이 뛰어올라보자!
            if (keys[' '] && !hero.isJumping) {
                hero.velocityY = -15;
                hero.isJumping = true;
                console.log("🦘 와! 정말 높이 뛰었어! 마치 하늘을 나는 것 같아!");
                showEncouragement("멋진 점프! 🦘");
            }

            // 🌍 중력 - 뛰어올랐으면 다시 내려와야 해요
            hero.velocityY += 0.8; // 중력이 아래로 끌어당겨요
            hero.y += hero.velocityY;

            // 🏔️ 바닥 체크 - 땅에 발을 딛고 서있게 해주는 거예요
            if (hero.y > 300) {
                hero.y = 300;
                hero.velocityY = 0;
                hero.isJumping = false;
            }

            // 🍌 바나나 움직임 - 던진 바나나들이 날아다녀요!
            bananas.forEach((banana, index) => {
                banana.x += banana.speed;
                // 화면 밖으로 나가면 사라져요
                if (banana.x > canvas.width + 50 || banana.x < -50) {
                    bananas.splice(index, 1);
                }
            });

            // 👹 적 생성 - 가끔씩 새로운 도전이 나타나요! (4초마다)
            if (gameState.frameCount % 240 === 0) {
                spawnEnemy();
            }

            // 👹 적 이동과 행동
            enemies.forEach((enemy, index) => {
                if (enemy.isSlipping) {
                    // 미끄러지는 악당!
                    enemy.x += 8; // 빨리 미끄러져 나가요
                    enemy.slipTimer++;
                    if (enemy.slipTimer > 60) { // 1초 후 사라져요
                        enemies.splice(index, 1);
                        console.log("😂 악당이 미끄러져서 도망갔어! 정말 재밌어!");
                    }
                } else {
                    // 보통 악당의 움직임
                    enemy.x += enemy.speed;
                }

                // 화면 밖으로 나가면 제거
                if (enemy.x < -enemy.width || enemy.x > canvas.width + 50) {
                    enemies.splice(index, 1);
                }
            });

            // 💥 충돌 체크 - 바나나와 적이 만나면 뭔가 일어나요!
            checkCollisions();
        }

        // 💥 충돌 체크 함수 - 게임의 재미있는 일들이 여기서 일어나요!
        function checkCollisions() {
            // 바나나와 적 충돌
            bananas.forEach((banana, bIndex) => {
                enemies.forEach((enemy, eIndex) => {
                    if (!enemy.isSlipping &&
                        banana.x < enemy.x + enemy.width &&
                        banana.x + banana.width > enemy.x &&
                        banana.y < enemy.y + enemy.height &&
                        banana.y + banana.height > enemy.y) {
                        
                        // 명중! 악당이 미끄러져요!
                        enemy.isSlipping = true;
                        enemy.color = '#ffa500'; // 색깔이 바뀌어요!
                        bananas.splice(bIndex, 1); // 바나나는 사라져요
                        gameState.score += 10; // 점수가 올라가요!
                        scoreDisplay.textContent = `점수: ${gameState.score} 🏆`;
                        
                        console.log("💥 대박! 명중이야! 점수가 올랐어!");
                        showEncouragement("완벽한 명중! 대단해! 💥");
                        
                        // 높은 점수 달성시 특별 격려!
                        if (gameState.score >= 50) {
                            showEncouragement("와! 50점 돌파! 정말 최고야! 🌟");
                        }
                        if (gameState.score >= 100) {
                            showEncouragement("100점 달성! 넌 진짜 게임 챔피언이야! 🏆");
                        }
                    }
                });
            });

            // 주인공과 적 충돌 - 조심해야 해요!
            enemies.forEach(enemy => {
                if (!enemy.isSlipping &&
                    hero.x < enemy.x + enemy.width &&
                    hero.x + hero.width > enemy.x &&
                    hero.y < enemy.y + enemy.height &&
                    hero.y + hero.height > enemy.y) {
                    gameState.gameOver = true;
                    console.log("😢 아이고! 악당에게 잡혔어! 하지만 괜찮아, 다시 해보자!");
                }
            });
        }

        // 🎨 그리기 함수 - 우리 게임의 모든 것들을 화면에 그려요!
        function draw() {
            // 화면 깨끗하게 지우기
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 🌱 예쁜 땅 그리기
            ctx.fillStyle = '#90ee90';
            ctx.fillRect(0, 350, canvas.width, 50);
            
            // 땅에 꽃들 그리기 (귀여운 장식!)
            for (let i = 50; i < canvas.width; i += 100) {
                ctx.fillStyle = '#ff69b4';
                ctx.beginPath();
                ctx.arc(i, 375, 5, 0, Math.PI * 2);
                ctx.fill();
            }

            // 🐵 우리의 멋진 히어로 그리기!
            ctx.fillStyle = hero.color;
            ctx.fillRect(hero.x, hero.y, hero.width, hero.height);
            
            // 히어로의 귀여운 얼굴
            ctx.fillStyle = '#ffd700';
            ctx.beginPath();
            ctx.arc(hero.x + 25, hero.y + 20, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // 깜빡이는 눈
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(hero.x + 20, hero.y + 15, 3, 0, Math.PI * 2);
            ctx.arc(hero.x + 30, hero.y + 15, 3, 0, Math.PI * 2);
            ctx.fill();
            
            // 방향 표시 (화살표)
            ctx.fillStyle = '#ff0000';
            if (hero.direction > 0) {
                // 오른쪽 화살표
                ctx.fillRect(hero.x + 35, hero.y + 25, 8, 2);
                ctx.fillRect(hero.x + 40, hero.y + 22, 2, 8);
            } else {
                // 왼쪽 화살표
                ctx.fillRect(hero.x + 7, hero.y + 25, 8, 2);
                ctx.fillRect(hero.x + 8, hero.y + 22, 2, 8);
            }

            // 🍌 날아다니는 바나나들 그리기!
            ctx.fillStyle = '#ffff00';
            bananas.forEach(banana => {
                ctx.fillRect(banana.x, banana.y, banana.width, banana.height);
                // 바나나에 귀여운 점들 추가
                ctx.fillStyle = '#ffa500';
                ctx.fillRect(banana.x + 3, banana.y + 2, 2, 2);
                ctx.fillRect(banana.x + 8, banana.y + 6, 2, 2);
                ctx.fillStyle = '#ffff00';
            });

            // 👹 악당들 그리기!
            enemies.forEach(enemy => {
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                // 악당의 무서운 얼굴 (사실 귀여워요!)
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.arc(enemy.x + 10, enemy.y + 15, 4, 0, Math.PI * 2);
                ctx.arc(enemy.x + 25, enemy.y + 15, 4, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = 'red';
                ctx.beginPath();
                ctx.arc(enemy.x + 10, enemy.y + 15, 2, 0, Math.PI * 2);
                ctx.arc(enemy.x + 25, enemy.y + 15, 2, 0, Math.PI * 2);
                ctx.fill();
                
                // 미끄러지고 있으면 특별 효과!
                if (enemy.isSlipping) {
                    ctx.fillStyle = 'yellow';
                    ctx.font = '20px Arial';
                    ctx.fillText('😵', enemy.x + 5, enemy.y - 5);
                }
            });

            // 🎮 게임 오버 화면 - 실패해도 괜찮아요!
            if (gameState.gameOver) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#ffd700';
                ctx.font = 'bold 48px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('잠깐! 게임이 끝났어!', canvas.width / 2, canvas.height / 2 - 50);
                
                ctx.fillStyle = '#87ceeb';
                ctx.font = '24px Arial';
                ctx.fillText('하지만 괜찮아! 실수는 배우는 거야! 😊', canvas.width / 2, canvas.height / 2);
                ctx.fillText(`너의 점수: ${gameState.score}점! 정말 잘했어! 🏆`, canvas.width / 2, canvas.height / 2 + 30);
                ctx.fillText('R키를 눌러서 다시 도전해보자! 🚀', canvas.width / 2, canvas.height / 2 + 60);
                
                ctx.textAlign = 'left';
            }
        }

        // 🔄 게임 리셋 함수 - 새로운 시작!
        function resetGame() {
            gameState = {
                score: 0,
                gameOver: false,
                frameCount: 0,
                encouragementTimer: 0
            };
            hero.x = 100;
            hero.y = 300;
            hero.velocityY = 0;
            hero.isJumping = false;
            hero.direction = 1;
            bananas = [];
            enemies = [];
            scoreDisplay.textContent = '점수: 0 🏆';
            showEncouragement("새로운 모험이 시작돼! 파이팅! 💪");
            console.log("🎮 새 게임 시작! 이번엔 더 멋진 모험이 될 거야!");
        }

        // 🎮 게임 루프 - 게임의 심장박동 같은 거예요!
        function gameLoop() {
            update(); // 게임 상태 업데이트
            draw();   // 화면에 그리기
            requestAnimationFrame(gameLoop); // 다음 프레임 준비
        }

        // 🚀 게임 시작!
        console.log("🎉 바나나 히어로의 모험이 시작되었어!");
        console.log("💡 조작법:");
        console.log("   ← → 키: 좌우 이동 (달려보자!)");
        console.log("   스페이스: 점프 (높이 뛰어올라!)");
        console.log("   Z키: 바나나 던지기 (멋진 무기야!)");
        console.log("   R키: 다시 시작 (언제든 새로 시작할 수 있어!)");
        console.log("🎯 목표: 악당들을 바나나로 물리치고 높은 점수를 얻어보자!");
        console.log("💝 기억해: 실수해도 괜찮아! 모든 게임 개발자들도 실수를 하거든!");
        
        gameLoop();
        showEncouragement("게임이 시작되었어! 정말 신나는 모험이 될 거야! 🎮");
    </script>
</body>
</html>