<!DOCTYPE html>
<html>
<head>
    <title>바나나 히어로의 모험 - 체크리스트 프로젝트</title>
    <style>
        body { 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
        }
        
        #projectContainer {
            text-align: center;
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border: 3px solid #3498db;
        }
        
        #projectTitle {
            color: #2c3e50;
            margin: 0 0 20px 0;
            font-size: 24px;
            font-weight: bold;
        }
        
        #gameCanvas { 
            border: 2px solid #2c3e50; 
            background: #87ceeb;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        #statusPanel {
            margin: 15px 0;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            text-align: center;
        }
        
        .status-item {
            background: #ecf0f1;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #bdc3c7;
        }
        
        .status-value {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .status-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        #progressBar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
            border: 2px solid #bdc3c7;
        }
        
        #progressFill {
            height: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
        
        #phaseInfo {
            margin: 10px 0;
            padding: 10px;
            background: #3498db;
            color: white;
            border-radius: 6px;
            font-weight: bold;
        }
        
        #controls {
            margin: 15px 0;
            font-size: 14px;
            color: #2c3e50;
            background: #ecf0f1;
            padding: 10px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        .checkpoint {
            background: #2ecc71;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin: 2px;
            display: inline-block;
        }
        
        .checkpoint.incomplete {
            background: #95a5a6;
        }
        
        #timerDisplay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(52, 73, 94, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="timerDisplay">⏱️ 00:00</div>
    
    <div id="projectContainer">
        <h1 id="projectTitle">📋 바나나 히어로 프로젝트 관리</h1>
        
        <div id="statusPanel">
            <div class="status-item">
                <div class="status-value" id="scoreValue">0</div>
                <div class="status-label">총 점수</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="phaseValue">1/6</div>
                <div class="status-label">진행 단계</div>
            </div>
            <div class="status-item">
                <div class="status-value" id="checkpointValue">0/9</div>
                <div class="status-label">완료 체크포인트</div>
            </div>
        </div>
        
        <div id="progressBar">
            <div id="progressFill">Phase 1 시작</div>
        </div>
        
        <div id="phaseInfo">🎯 Phase 1: 프로젝트 설정 - 게임이 실행되는 빈 화면 만들기</div>
        
        <canvas id="game" width="800" height="400"></canvas>
        
        <div id="controls">
            <strong>📋 조작법:</strong> ← → 이동 | 스페이스 점프 | Z 바나나 발사 | R 재시작<br>
            <strong>🎯 현재 목표:</strong> <span id="currentObjective">게임 화면이 정상적으로 표시되는지 확인</span>
        </div>
        
        <div id="checkpoints">
            <div class="checkpoint incomplete" id="checkpoint1">✅ 화면 표시</div>
            <div class="checkpoint incomplete" id="checkpoint2">✅ 캐릭터 생성</div>
            <div class="checkpoint incomplete" id="checkpoint3">✅ 이동 구현</div>
            <div class="checkpoint incomplete" id="checkpoint4">✅ 점프 시스템</div>
            <div class="checkpoint incomplete" id="checkpoint5">✅ 바나나 발사</div>
            <div class="checkpoint incomplete" id="checkpoint6">✅ 적 생성</div>
            <div class="checkpoint incomplete" id="checkpoint7">✅ 충돌 감지</div>
            <div class="checkpoint incomplete" id="checkpoint8">✅ 점수 시스템</div>
            <div class="checkpoint incomplete" id="checkpoint9">✅ 게임 완성</div>
        </div>
    </div>

    <script>
        // 📋 프로젝트 관리 시스템 시작
        console.log("📋 체크리스트 프로젝트 관리 시스템 시작!");
        console.log("🎯 목표: 체계적인 단계별 진행으로 완벽한 게임 완성");
        
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        
        // 📊 프로젝트 진행 상태 관리
        let projectState = {
            currentPhase: 1,
            totalPhases: 6,
            completedCheckpoints: 0,
            totalCheckpoints: 9,
            score: 0,
            startTime: Date.now(),
            phaseStartTime: Date.now(),
            gameOver: false,
            projectComplete: false
        };

        // 📋 체크포인트 시스템
        const checkpoints = [
            { id: 1, name: "화면 표시", phase: 1, completed: false },
            { id: 2, name: "캐릭터 생성", phase: 2, completed: false },
            { id: 3, name: "이동 구현", phase: 3, completed: false },
            { id: 4, name: "점프 시스템", phase: 3, completed: false },
            { id: 5, name: "바나나 발사", phase: 4, completed: false },
            { id: 6, name: "적 생성", phase: 5, completed: false },
            { id: 7, name: "충돌 감지", phase: 5, completed: false },
            { id: 8, name: "점수 시스템", phase: 6, completed: false },
            { id: 9, name: "게임 완성", phase: 6, completed: false }
        ];

        // 📋 단계별 목표 설명
        const phaseObjectives = [
            "게임 화면이 정상적으로 표시되는지 확인",
            "원숭이 캐릭터가 화면에 올바르게 그려지는지 확인",
            "화살표키로 좌우 이동과 스페이스바 점프가 작동하는지 확인",
            "Z키로 바나나를 발사할 수 있는지 확인",
            "적이 자동 생성되고 바나나 충돌 시 제거되는지 확인",
            "점수 시스템과 게임 오버 기능이 정상 작동하는지 확인"
        ];

        // 🎮 게임 객체들
        const player = {
            x: 100,
            y: 300,
            width: 50,
            height: 50,
            color: '#8B4513',
            velocityY: 0,
            isJumping: false,
            groundY: 300,
            speed: 5
        };

        let bananas = [];
        let enemies = [];
        const keys = {};

        // ⌨️ 키보드 입력 처리
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            // 바나나 발사
            if ((e.key === 'z' || e.key === 'Z') && !projectState.gameOver) {
                createBanana();
                completeCheckpoint(5); // 바나나 발사 체크포인트
            }
            
            // 게임 재시작
            if ((e.key === 'r' || e.key === 'R') && projectState.gameOver) {
                resetProject();
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // 🍌 바나나 생성 함수
        function createBanana() {
            bananas.push({
                x: player.x + player.width,
                y: player.y + player.height / 2,
                width: 20,
                height: 10,
                speed: 12,
                color: '#FFFF00'
            });
            
            console.log("✅ 체크포인트 5 완료: 바나나 발사 시스템 작동 확인");
        }

        // 👾 적 생성 함수
        function createEnemy() {
            enemies.push({
                x: canvas.width,
                y: 300,
                width: 40,
                height: 50,
                speed: -3,
                color: '#FF0000',
                isSlipping: false
            });
            
            if (!checkpoints[5].completed) {
                completeCheckpoint(6); // 적 생성 체크포인트
            }
        }

        // ✅ 체크포인트 완료 함수
        function completeCheckpoint(id) {
            if (!checkpoints[id - 1].completed) {
                checkpoints[id - 1].completed = true;
                projectState.completedCheckpoints++;
                
                const checkpointElement = document.getElementById(`checkpoint${id}`);
                if (checkpointElement) {
                    checkpointElement.classList.remove('incomplete');
                }
                
                console.log(`✅ 체크포인트 ${id} 완료: ${checkpoints[id - 1].name}`);
                updateProjectStatus();
                
                // 단계 진행 체크
                checkPhaseProgress();
            }
        }

        // 📊 단계 진행 확인
        function checkPhaseProgress() {
            const currentPhaseCheckpoints = checkpoints.filter(cp => cp.phase === projectState.currentPhase);
            const completedInPhase = currentPhaseCheckpoints.filter(cp => cp.completed).length;
            
            if (completedInPhase === currentPhaseCheckpoints.length && projectState.currentPhase < projectState.totalPhases) {
                // 현재 단계 완료 - 다음 단계로
                projectState.currentPhase++;
                projectState.phaseStartTime = Date.now();
                
                console.log(`🎯 Phase ${projectState.currentPhase} 시작!`);
                updateProjectStatus();
            }
            
            // 프로젝트 완료 체크
            if (projectState.completedCheckpoints === projectState.totalCheckpoints) {
                projectState.projectComplete = true;
                console.log("🎉 프로젝트 완료! 모든 체크포인트 달성!");
            }
        }

        // 📊 프로젝트 상태 업데이트
        function updateProjectStatus() {
            document.getElementById('scoreValue').textContent = projectState.score;
            document.getElementById('phaseValue').textContent = `${projectState.currentPhase}/${projectState.totalPhases}`;
            document.getElementById('checkpointValue').textContent = `${projectState.completedCheckpoints}/${projectState.totalCheckpoints}`;
            
            const progress = (projectState.completedCheckpoints / projectState.totalCheckpoints) * 100;
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = progress + '%';
            progressFill.textContent = `${progress.toFixed(0)}% 완료`;
            
            if (projectState.currentPhase <= phaseObjectives.length) {
                document.getElementById('currentObjective').textContent = phaseObjectives[projectState.currentPhase - 1];
                document.getElementById('phaseInfo').textContent = `🎯 Phase ${projectState.currentPhase}: ${getPhaseTitle(projectState.currentPhase)}`;
            }
        }

        // 📋 단계 제목 가져오기
        function getPhaseTitle(phase) {
            const titles = [
                "프로젝트 설정 - 게임이 실행되는 빈 화면 만들기",
                "주인공 만들기 - 화면에 원숭이 캐릭터 표시",
                "컨트롤 추가 - 화살표키 이동과 스페이스바 점프",
                "바나나 시스템 - Z키로 바나나 던지기 구현",
                "적과 충돌 - 움직이는 적 생성과 충돌 감지",
                "게임 완성 - 점수 시스템과 게임 오버 구현"
            ];
            return titles[phase - 1] || "알 수 없는 단계";
        }

        // ⏱️ 타이머 업데이트
        function updateTimer() {
            const elapsed = Math.floor((Date.now() - projectState.startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timerDisplay').textContent = 
                `⏱️ ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // 🎯 게임 로직 업데이트
        function updateGame() {
            if (projectState.gameOver && !projectState.projectComplete) return;

            // 플레이어 이동
            let moved = false;
            if (keys['ArrowLeft'] && player.x > 0) {
                player.x -= player.speed;
                moved = true;
            }
            if (keys['ArrowRight'] && player.x < canvas.width - player.width) {
                player.x += player.speed;
                moved = true;
            }
            
            // 첫 이동 시 체크포인트 완료
            if (moved && !checkpoints[2].completed) {
                completeCheckpoint(3);
            }

            // 점프
            if (keys[' '] && !player.isJumping) {
                player.velocityY = -15;
                player.isJumping = true;
                
                // 첫 점프 시 체크포인트 완료
                if (!checkpoints[3].completed) {
                    completeCheckpoint(4);
                }
            }

            // 중력과 물리
            player.velocityY += 0.8;
            player.y += player.velocityY;

            // 바닥 체크
            if (player.y > player.groundY) {
                player.y = player.groundY;
                player.velocityY = 0;
                player.isJumping = false;
            }

            // 바나나 업데이트
            bananas.forEach((banana, index) => {
                banana.x += banana.speed;
                if (banana.x > canvas.width) {
                    bananas.splice(index, 1);
                }
            });

            // 적 생성 (3초마다)
            if (Math.random() < 0.01 && projectState.currentPhase >= 5) {
                createEnemy();
            }

            // 적 업데이트
            enemies.forEach((enemy, index) => {
                if (enemy.isSlipping) {
                    enemy.x += 8; // 미끄러지며 빠르게 이동
                    if (enemy.x > canvas.width + 100) {
                        enemies.splice(index, 1);
                    }
                } else {
                    enemy.x += enemy.speed;
                    if (enemy.x < -enemy.width) {
                        enemies.splice(index, 1);
                    }
                }
            });

            // 충돌 검사
            checkCollisions();
        }

        // 💥 충돌 검사
        function checkCollisions() {
            // 바나나와 적 충돌
            bananas.forEach((banana, bIndex) => {
                enemies.forEach((enemy, eIndex) => {
                    if (!enemy.isSlipping &&
                        banana.x < enemy.x + enemy.width &&
                        banana.x + banana.width > enemy.x &&
                        banana.y < enemy.y + enemy.height &&
                        banana.y + banana.height > enemy.y) {
                        
                        // 충돌 처리
                        enemy.isSlipping = true;
                        enemy.color = '#FFA500';
                        bananas.splice(bIndex, 1);
                        projectState.score += 10;
                        
                        console.log(`💥 충돌 감지! 점수 +10 (총점: ${projectState.score})`);
                        
                        // 충돌 감지 체크포인트
                        if (!checkpoints[6].completed) {
                            completeCheckpoint(7);
                        }
                        
                        // 점수 시스템 체크포인트
                        if (!checkpoints[7].completed) {
                            completeCheckpoint(8);
                        }
                    }
                });
            });

            // 플레이어와 적 충돌
            enemies.forEach((enemy, index) => {
                if (!enemy.isSlipping &&
                    player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {
                    
                    projectState.gameOver = true;
                    
                    // 게임 완성 체크포인트
                    if (!checkpoints[8].completed) {
                        completeCheckpoint(9);
                    }
                    
                    console.log("💀 게임 오버! 프로젝트 완료 테스트 성공!");
                }
            });
        }

        // 🎨 렌더링
        function drawGame() {
            // 화면 지우기
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 배경 그라디언트
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87ceeb');
            gradient.addColorStop(1, '#98fb98');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 땅
            ctx.fillStyle = '#8fbc8f';
            ctx.fillRect(0, 340, canvas.width, 60);

            // 플레이어
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // 플레이어 얼굴
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.arc(player.x + 25, player.y + 20, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // 눈
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(player.x + 20, player.y + 15, 3, 0, Math.PI * 2);
            ctx.arc(player.x + 30, player.y + 15, 3, 0, Math.PI * 2);
            ctx.fill();

            // 바나나들
            ctx.fillStyle = '#FFFF00';
            bananas.forEach(banana => {
                ctx.fillRect(banana.x, banana.y, banana.width, banana.height);
            });

            // 적들
            enemies.forEach(enemy => {
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                // 적 얼굴
                ctx.fillStyle = 'white';
                ctx.fillRect(enemy.x + 8, enemy.y + 10, 4, 4);
                ctx.fillRect(enemy.x + 20, enemy.y + 10, 4, 4);
            });

            // 점수 표시
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 20px Arial';
            ctx.fillText(`점수: ${projectState.score}`, 10, 30);

            // 프로젝트 완료 화면
            if (projectState.projectComplete) {
                ctx.fillStyle = 'rgba(46, 204, 113, 0.9)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = 'white';
                ctx.font = 'bold 36px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('🎉 프로젝트 완료!', canvas.width/2, canvas.height/2 - 40);
                
                ctx.font = '20px Arial';
                ctx.fillText('모든 체크포인트 달성!', canvas.width/2, canvas.height/2);
                ctx.fillText(`최종 점수: ${projectState.score}점`, canvas.width/2, canvas.height/2 + 30);
                
                const elapsed = Math.floor((Date.now() - projectState.startTime) / 1000);
                ctx.fillText(`완료 시간: ${Math.floor(elapsed/60)}분 ${elapsed%60}초`, canvas.width/2, canvas.height/2 + 60);
                
                ctx.textAlign = 'left';
            }
            // 게임 오버 화면
            else if (projectState.gameOver) {
                ctx.fillStyle = 'rgba(231, 76, 60, 0.9)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = 'white';
                ctx.font = 'bold 36px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('📋 테스트 완료', canvas.width/2, canvas.height/2 - 40);
                
                ctx.font = '18px Arial';
                ctx.fillText('게임 오버 기능 정상 작동', canvas.width/2, canvas.height/2);
                ctx.fillText(`달성 점수: ${projectState.score}점`, canvas.width/2, canvas.height/2 + 25);
                ctx.fillText('R키를 눌러 프로젝트 재시작', canvas.width/2, canvas.height/2 + 50);
                
                ctx.textAlign = 'left';
            }
        }

        // 🔄 프로젝트 리셋
        function resetProject() {
            projectState = {
                currentPhase: 1,
                totalPhases: 6,
                completedCheckpoints: 0,
                totalCheckpoints: 9,
                score: 0,
                startTime: Date.now(),
                phaseStartTime: Date.now(),
                gameOver: false,
                projectComplete: false
            };
            
            player.x = 100;
            player.y = 300;
            player.velocityY = 0;
            player.isJumping = false;
            
            bananas = [];
            enemies = [];
            
            // 체크포인트 리셋
            checkpoints.forEach((checkpoint, index) => {
                checkpoint.completed = false;
                const element = document.getElementById(`checkpoint${index + 1}`);
                if (element) {
                    element.classList.add('incomplete');
                }
            });
            
            updateProjectStatus();
            console.log("🔄 프로젝트 재시작 - 모든 체크포인트 초기화");
        }

        // 🎮 게임 루프
        function gameLoop() {
            updateGame();
            drawGame();
            updateTimer();
            requestAnimationFrame(gameLoop);
        }

        // 🚀 프로젝트 시작
        console.log("📋 체크리스트 기반 프로젝트 관리 시스템!");
        console.log("🎯 특징:");
        console.log("  - 체계적인 단계별 진행");
        console.log("  - 명확한 체크포인트");
        console.log("  - 실시간 진행 상황 추적");
        console.log("  - 시간 관리 시스템");
        console.log("  - 완료도 측정 및 분석");
        
        // 초기 상태 설정
        updateProjectStatus();
        
        // 첫 번째 체크포인트 완료 (화면 표시)
        setTimeout(() => {
            completeCheckpoint(1);
        }, 1000);
        
        // 두 번째 체크포인트 완료 (캐릭터 생성)
        setTimeout(() => {
            completeCheckpoint(2);
        }, 2000);
        
        gameLoop();
    </script>
</body>
</html>